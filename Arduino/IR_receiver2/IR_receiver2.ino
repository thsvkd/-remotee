unsigned int pinIR = 6;            // IR sensor pin
unsigned int currentPulse = 0;     // Pulse index
unsigned long pulses[100][2];      // Array of high and low pulse 
unsigned long maxPulse = 50000;    // Maximum listen duration (65 msec)
 
 
void setup(void) {
  Serial.begin(9600);
  Serial.println("Ready to decode IR!");
}
//1111 1111 1111 1111 0000 0000 1010 1010 1010 1010 1000 1000 1000
//A = 1010 = 
/*
9104,-4508,576,-544,576,-536,580,-540,576,-540,580,-536,576,-544,576,-544,576,-536,584,-1644,576,-1652,576,-1652,580,-1648,576,-1656,576,-1644,584,-1644,576,-1652,580,-1652,572,-540,576,-1656,576,-532,580,-540,576,-540,580,-1640,580,-532,584,-532,584,-1644,584,-532,588,-1648,572,-1652,576,-1652,576,-544,576,-1656,576,-39988,9096,-2236,572
9096,-4504,580,-540,576,-540,580,-536,580,-540,576,-540,576,-532,588,-532,576,-540,576,-1652,580,-1648,580,-1652,576,-1644,576,-1656,576,-1652,580,-1652,580,-1652,576,-1644,584,-532,576,-1652,580,-540,580,-540,576,-536,580,-1648,572,-532,584,-532,576,-1652,576,-540,580,-1652,576,-1652,576,-1644,584,-532,576,-1652,580
9104,-4508,576,-544,576,-544,576,-540,576,-540,580,-536,572,-536,580,-540,576,-540,576,-1656,576,-1652,576,-1652,568,-1652,580,-1648,572,-1656,576,-1652,576,-1652,572,-1648,580,-540,576,-1652,576,-544,576,-532,576,-540,580,-1652,580,-536,580,-540,576,-1644,584,-532,576,-1656,572,-1652,580,-1652,580,-536,576,-1644,576
9088,-4520,572,-532,576,-540,576,-544,576,-536,580,-540,568,-540,576,-536,580,-540,572,-1656,576,-1644,576,-1652,580,-1648,580,-1652,576,-1652,576,-1644,576,-1652,580,-1652,576,-540,580,-1644,576,-532,576,-544,576,-544,576,-1652,580,-540,572,-540,576,-1652,576,-544,572,-1652,576,-1652,568,-1652,580,-540,580,-1652,576
9096,-4508,576,-544,576,-540,576,-532,584,-536,572,-536,580,-540,576,-540,580,-536,576,-1648,572,-1656,576,-1652,576,-1652,580,-1652,572,-1644,584,-1644,576,-1652,576,-1652,580,-540,580,-1644,576,-532,584,-532,576,-544,576,-1652,576,-540,580,-536,572,-1652,588,-532,576,-1652,576,-1652,580,-1652,580,-540,568,-1652,576
9096,-4508,576,-540,576,-532,576,-540,580,-536,580,-540,576,-540,584,-532,576,-536,588,-1644,576,-1652,576,-1652,580,-1652,576,-1652,576,-1644,576,-1652,580,-1648,580,-1652,576,-540,576,-1656,576,-532,576,-544,572,-536,580,-1652,576,-540,580,-536,576,-1656,576,-532,584,-1652,568,-1652,580,-1652,572,-544,576,-1656,572
FFA25D

*/
void loop(void) {
  unsigned long highPulse = 0;     // Pulse length
  unsigned long lowPulse = 0;
  unsigned long currTime = micros();
  
  while (digitalRead(pinIR)) {
    highPulse = micros()-currTime;
    if ((highPulse >= maxPulse) && (currentPulse != 0)) {
      printPulses();
      currentPulse = 0;
    }
  }
  pulses[currentPulse][0] = highPulse;
  currTime = micros();
   
  while (!digitalRead(pinIR)) {
    lowPulse = micros()-currTime;
  }
  pulses[currentPulse][1] = lowPulse;
  currentPulse++;
}
 
 
void printPulses(void) {
  for (int i = 0; i < currentPulse-1; i++) {
    Serial.print(pulses[i][1], DEC);
    Serial.print(",-");
    Serial.print(pulses[i+1][0], DEC);
    Serial.print(",");
  }
  Serial.println(pulses[currentPulse-1][1], DEC);
}
